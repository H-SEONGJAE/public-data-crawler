import streamlit as st
import json

# =========================
# ê¸°ë³¸ ì„¤ì •
# =========================
st.set_page_config(
    page_title="ê³µê³µë°ì´í„° í¬í„¸ ê¸°ê´€ íŒŒì¼ë°ì´í„° ìë™ ìˆ˜ì§‘ê¸°",
    layout="centered"
)

st.title("ğŸ“¥ íŒŒì¼ë°ì´í„° ìë™ ìˆ˜ì§‘ê¸°")

# =========================
# ì…ë ¥ ì˜ì—­
# =========================
inst_name = st.text_input(
    "ê¸°ê´€ëª…",
    placeholder="ì˜ˆ: í•œêµ­ì¤‘ë¶€ë°œì „(ì£¼)"
)

org_url = st.text_input(
    "ê¸°ê´€ URL",
    placeholder="ê³µê³µë°ì´í„°í¬í„¸ ê¸°ê´€ë³„ íŒŒì¼ë°ì´í„° í˜ì´ì§€ URL"
)

# =========================
# ğŸ“Œ ê¸°ê´€ URL ì…ë ¥ ë°©ë²• ì•ˆë‚´
# =========================
st.markdown("### ğŸ“Œ ê¸°ê´€ URL ì…ë ¥ ë°©ë²•")

st.markdown("""
ì•„ë˜ ì´ë¯¸ì§€ë¥¼ ì°¸ê³ í•˜ì—¬ **ê³µê³µë°ì´í„°í¬í„¸ì—ì„œ ê¸°ê´€ë³„ íŒŒì¼ë°ì´í„° í˜ì´ì§€ URL**ì„ ë³µì‚¬í•´ ì…ë ¥í•´ì£¼ì„¸ìš”.
""")

st.image(
    [
        "ê¸°ê´€ë³„ ê²€ìƒ‰.png",
        "ê¸°ê´€ ê²€ìƒ‰ì°½.png",
        "í•´ë‹¹ í˜ì´ì§€ URL ë³µì‚¬.png",
    ],
    caption=[
        "â‘  ë°ì´í„°ëª©ë¡ í™”ë©´ì—ì„œ [ì œê³µê¸°ê´€ë³„ ê²€ìƒ‰] ë²„íŠ¼ í´ë¦­",
        "â‘¡ ê¸°ê´€ëª… ê²€ìƒ‰ í›„ ëª©ë¡ì—ì„œ í•´ë‹¹ ê¸°ê´€ ì„ íƒ",
        "â‘¢ ìƒë‹¨ ì£¼ì†Œì°½ì˜ URLì„ ë³µì‚¬í•˜ì—¬ ì…ë ¥",
    ],
    use_column_width=True
)

st.divider()

# =========================
# ì‹¤í–‰ ë²„íŠ¼ (config.json ìƒì„±)
# =========================
if st.button("ğŸš€ ì„¤ì • íŒŒì¼ ìƒì„±"):
    if not inst_name or not org_url:
        st.error("ê¸°ê´€ëª…ê³¼ ê¸°ê´€ URLì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.")
    else:
        config = {
            "inst_name": inst_name,
            "org_url": org_url
        }

        st.success("ì„¤ì • íŒŒì¼ ìƒì„± ì™„ë£Œ")

        st.markdown("""
### ğŸ“¥ ë‹¤ìŒ ë‹¨ê³„ ì•ˆë‚´
1ï¸âƒ£ **config.json íŒŒì¼ ë‹¤ìš´ë¡œë“œ**  
2ï¸âƒ£ `data_crawler.exe`ì™€ jsoníŒŒì¼ì„ ê°™ì€ í´ë”ì— ë„£ê¸°**  
3ï¸âƒ£ `data_crawler.exe` ì‹¤í–‰
""")

        st.download_button(
            label="ğŸ“„ config.json ë‹¤ìš´ë¡œë“œ",
            data=json.dumps(config, ensure_ascii=False, indent=2),
            file_name="config.json",
            mime="application/json"
        )
